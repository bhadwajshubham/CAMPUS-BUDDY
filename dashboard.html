<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Campus-Buddy â€” Dashboard</title>
  
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/variables.css">
  <link rel="stylesheet" href="/css/homepage.css">
  <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body id="dashboard-page">

  <header class="app-header">
    <div class="header-container">
      
      <div class="brand-area">
        <a href="/index.html" class="logo-link">
          <div class="brand-mark">CB</div>
        </a>
        <div class="search-wrapper">
            <i class="ri-search-line search-icon"></i>
            <input id="searchInput" class="search-input" placeholder="Search events..." />
        </div>
      </div>

      <div class="user-area">
        <button id="btn-create-event" class="btn primary btn-sm" style="display:none;">
            <i class="ri-add-line"></i> Create Event
        </button>
        <div class="divider-vertical"></div>
        <div class="profile-wrapper">
            <div class="profile-text">
                <span id="header-username" class="user-name">Loading...</span>
                <span id="header-role" class="user-role">Student</span>
            </div>
            <div class="avatar-circle"><i class="ri-user-3-fill"></i></div>
            <button id="logoutBtn" class="btn-icon" title="Logout"><i class="ri-logout-box-r-line"></i></button>
        </div>
      </div>
    </div>
  </header>

  <main class="dashboard-layout">

    <aside id="sidebar" class="sidebar">
      <nav class="nav-menu">
        
        <div id="menu-organizer" style="display:none;">
            <div class="nav-label">Management</div>
            <a class="nav-link active" href="#" id="nav-overview"><i class="ri-dashboard-line"></i> Overview</a>
            <a class="nav-link" href="#" id="nav-events"><i class="ri-calendar-event-line"></i> My Events</a>
            <a class="nav-link" href="#" id="nav-registrations"><i class="ri-group-line"></i> Registrations</a>
            <a class="nav-link" href="#" id="nav-scanner"><i class="ri-qr-scan-2-line"></i> QR Scanner</a>
            <a class="nav-link" href="#" id="nav-analytics"><i class="ri-bar-chart-grouped-line"></i> Analytics</a>
        </div>
        
        <div id="menu-student" style="display:none;">
            <div class="nav-label">Menu</div>
            <a class="nav-link active" href="#" id="nav-explore"><i class="ri-compass-3-line"></i> Explore</a>
            <a class="nav-link" href="#" id="nav-tickets"><i class="ri-ticket-2-line"></i> My Tickets</a>
            <a class="nav-link" href="#" id="nav-certificates"><i class="ri-medal-line"></i> Certificates</a>
        </div>

        <div id="menu-admin" style="display:none; margin-top: 20px; border-top: 1px solid var(--border); padding-top: 10px;">
            <div class="nav-label" style="color:var(--accent);">Faculty Controls</div>
            <a class="nav-link" href="#" id="nav-manage-users">
                <i class="ri-user-settings-line"></i> Assign Club Heads
            </a>
        </div>

        <div class="nav-spacer"></div>
        <div class="nav-label">System</div>
        <a class="nav-link" href="#"><i class="ri-settings-4-line"></i> Settings</a>
        <a class="nav-link" href="#"><i class="ri-question-line"></i> Help Center</a>
      </nav>
    </aside>

    <section class="content-area">
        
        <div id="organizer-view" class="view-container" style="display:none;">
             <div class="page-header">
                <h2 id="organizer-welcome">Dashboard Overview</h2>
                <p>Here is what's happening with your events today.</p>
             </div>
             <div class="stats-grid">
                <div class="stat-card">
                    <div class="icon-box purple"><i class="ri-calendar-check-line"></i></div>
                    <div><h3>Active Events</h3><div class="stat-value">--</div></div>
                </div>
                <div class="stat-card">
                    <div class="icon-box blue"><i class="ri-group-line"></i></div>
                    <div><h3>Total Attendees</h3><div class="stat-value">--</div></div>
                </div>
                <div class="stat-card">
                    <div class="icon-box pink"><i class="ri-coupon-3-line"></i></div>
                    <div><h3>Tickets Sold</h3><div class="stat-value">--</div></div>
                </div>
             </div>
             <div class="section-header"><h4>Your Events</h4></div>
             <div id="organizer-event-list" class="events-grid-list"></div>
        </div>

        <div id="student-view" class="view-container" style="display:none;">
             <div class="page-header">
                <h2 id="student-welcome">Welcome Back</h2>
                <p>Your upcoming events and tickets.</p>
             </div>
             <div id="student-upcoming-list" class="events-grid-list"></div>
        </div>

    </section>
  </main>

  <div id="profile-completion-modal" class="modal-backdrop" style="display:none;">
    <div class="modal" style="max-width: 450px;">
      <h3 style="color:var(--primary); margin-bottom:10px;">Complete Your Profile</h3>
      <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">
        University regulations require these details.
      </p>

      <form id="completeProfileForm">
        <div style="margin-bottom:15px;">
          <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Roll Number</label>
          <input type="text" id="inputRollNo" placeholder="e.g. 211099xxxx" required>
        </div>

        <div style="margin-bottom:15px;">
          <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Department</label>
          <select id="inputDept" required>
            <option value="" disabled selected>Select Branch</option>
            <option value="CSE">Computer Science (CSE)</option>
            <option value="ME">Mechanical (ME)</option>
            <option value="ECE">Electronics (ECE)</option>
            <option value="BBA">Business (BBA)</option>
            <option value="PHARM">Pharmacy</option>
            <option value="NURSING">Nursing</option>
          </select>
        </div>

        <div style="margin-bottom:15px;">
          <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Group</label>
          <input type="text" id="inputGroup" placeholder="e.g. G14" required>
        </div>

        <div style="margin-bottom:20px;">
          <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Mobile Number</label>
          <input type="tel" id="inputMobile" placeholder="+91 xxxxx xxxxx" required>
        </div>

        <button type="submit" class="btn primary" style="width:100%;">Save & Continue</button>
      </form>
    </div>
  </div>

  <div id="manage-users-modal" class="modal-backdrop" style="display:none;">
    <div class="modal" style="max-width: 450px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="color:var(--primary);">Assign Club Roles</h3>
            <button id="close-manage-modal" class="btn-icon"><i class="ri-close-line"></i></button>
        </div>
        
        <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">
          Search for a student to promote them.
        </p>
  
        <form id="manageUsersForm">
          <div style="margin-bottom:15px;">
            <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Email</label>
            <input type="email" id="mgmtEmail" placeholder="student@university.edu" required>
          </div>
  
          <div style="margin-bottom:20px;">
            <label style="display:block; color:var(--text-muted); font-size:0.8rem; margin-bottom:5px;">Role</label>
            <select id="mgmtRole">
              <option value="organizer">Club Organizer (Head)</option>
              <option value="student">Student (Demote)</option>
            </select>
          </div>
  
          <button type="submit" class="btn primary" style="width:100%;">Update Access</button>
        </form>
        <div id="mgmt-status" style="margin-top:15px; font-size:0.85rem; text-align:center;"></div>
    </div>
  </div>

  <div id="qr-modal" class="modal-backdrop" style="display:none;">
    <div class="modal" style="text-align:center; max-width:350px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 id="qr-event-title" style="font-size:1.1rem;">Event Ticket</h3>
            <button id="close-modal" class="btn-icon"><i class="ri-close-line"></i></button>
        </div>
        <div style="background:white; padding:10px; border-radius:12px; display:inline-block;">
            <img src="" alt="QR Code" style="width: 200px; height: 200px; display:block;">
        </div>
        <p style="color:var(--text-muted); font-size:0.85rem; margin-top:15px;">Show this at the venue.</p>
    </div>
  </div>

  <div id="attendee-modal" class="modal-backdrop" style="display:none;">
    <div class="modal" style="max-width: 500px; width:90%; max-height:80vh; display:flex; flex-direction:column;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 id="attendee-modal-title">Registered Students</h3>
            <button id="close-attendee-modal" class="btn-icon"><i class="ri-close-line"></i></button>
        </div>
        <div id="attendee-list-container" style="overflow-y:auto; flex:1;">
            </div>
    </div>
  </div>

  <script type="module" src="/js/dashboard.js"></script>
</body>
</html>